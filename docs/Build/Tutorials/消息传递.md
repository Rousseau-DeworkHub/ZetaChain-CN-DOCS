# æ¶ˆæ¯ä¼ é€’

| æ ‡é¢˜ | æè¿° |
| :- | :- |
| æ¶ˆæ¯ä¼ é€’ | äº†è§£å¦‚ä½•åœ¨ EVM é“¾ä¸Šçš„åˆçº¦ä¹‹é—´è¿›è¡Œè·¨é“¾è°ƒç”¨ã€‚ |

æœ¬æ•™ç¨‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ ZetaChain çš„æ¶ˆæ¯ä¼ é€’åŸºç¡€è®¾æ–½ï¼Œåœ¨ä¸¤ä¸ª EVM é“¾ä¸Šçš„æ™ºèƒ½åˆçº¦ä¹‹é—´å‘é€è·¨é“¾æ¶ˆæ¯ã€‚

ä¸ç›´æ¥éƒ¨ç½²åœ¨ ZetaChain ä¸Šçš„é€šç”¨åº”ç”¨ï¼ˆUniversal Appï¼‰ä¸åŒï¼Œæ­¤æ–¹æ³•å…è®¸ä½ å°†å…¨éƒ¨æ™ºèƒ½åˆçº¦é€»è¾‘ä¿ç•™åœ¨å·²è¿æ¥çš„ EVM é“¾ä¸Šã€‚ZetaChain ä»…è´Ÿè´£åœ¨é“¾ä¹‹é—´è½¬å‘æ¶ˆæ¯è½½è·ï¼Œæ— éœ€åœ¨ ZetaChain ä¸Šé¢å¤–éƒ¨ç½²æ™ºèƒ½åˆçº¦ã€‚

> ğŸ’¡ ä¸ºä½•é€‰æ‹©æ­¤æ¨¡å¼ï¼Ÿ  
> ä¸ç›´æ¥éƒ¨ç½²åœ¨ ZetaChain ä¸Šçš„é€šç”¨åº”ç”¨ä¸åŒï¼Œè¯¥æ¨¡å¼å…è®¸ä½ ä¿ç•™æ—¢æœ‰çš„é“¾ä¸Šä¸šåŠ¡é€»è¾‘ï¼Œä»…è®© ZetaChain æ‰¿æ‹…è·¨é“¾æ¶ˆæ¯ä¸­ç»§åŠŸèƒ½ï¼Œæ— éœ€åœ¨ ZetaChain ä¸Šé‡å†™ä»»ä½•é€»è¾‘ã€‚

å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- åœ¨ä¸¤ä¸ª EVM æµ‹è¯•ç½‘ï¼ˆBase ä¸ Ethereum Sepoliaï¼‰ä¸Šéƒ¨ç½²æ¶ˆæ¯æ™ºèƒ½åˆçº¦ã€‚
- ä¸ºæ™ºèƒ½åˆçº¦å»ºç«‹è·¨é“¾é€šä¿¡é“¾æ¥ã€‚
- ä»ä¸€ä¸ªæ™ºèƒ½åˆçº¦å‘å¦ä¸€ä¸ªå‘é€æ¶ˆæ¯ä¸ä»£å¸ä»·å€¼ã€‚
- è·Ÿè¸ªä»æºé“¾åˆ°ç›®æ ‡é“¾çš„è·¨é“¾äº¤æ˜“çŠ¶æ€ã€‚

<div className="mt-8" style={{ width: "100%", height: "auto", "aspect-ratio": "16 / 9" }}>
Â  <iframe
Â  Â  width="100%"
Â  Â  height="100%"
Â  Â  src="https://www.youtube.com/embed/UrAMdR807JQ"
Â  Â  filename="YouTube video player"
Â  Â  frameborder="0"
Â  Â  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
Â  Â  allowfullscreen
Â  ></iframe>
</div>

## åˆ›å»ºé¡¹ç›®

ä½¿ç”¨ `messaging` æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼š

```bash
npx zetachain new --project messaging
```

å®‰è£… TypeScript å’Œ Foundry ä¾èµ–ï¼š

```bash
cd messaging
yarn
forge soldeer update
```

ç¼–è¯‘åˆçº¦ï¼š

```bash
forge build
```

å°†æ‚¨çš„ç§é’¥ä¿å­˜åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä»¥ä¾¿ shell è„šæœ¬å¯ä»¥è¯»å–å®ƒï¼š

```bash
PRIVATE_KEY=...
```

## æ¶ˆæ¯åˆçº¦

è¦å¯ç”¨è·¨é“¾æ¶ˆæ¯ä¼ é€’ï¼Œæ‚¨çš„åˆçº¦å¿…é¡»ç»§æ‰¿è‡ª ZetaChain çš„ `Messaging` åŸºç¡€åˆçº¦ï¼Œå¹¶å®ç°ä¸€äº›å¿…éœ€çš„å‡½æ•°ã€‚

ä» ZetaChain æ ‡å‡†åˆçº¦åŒ…ä¸­å¯¼å…¥ `Messaging.sol` åˆçº¦ï¼š

```solidity
import "@zetachain/standard-contracts/contracts/messaging/contracts/Messaging.sol";
```

ç»§æ‰¿ `Messaging`ï¼š

```solidity
contract Example is Messaging { ... }
```

åœ¨æ„é€ å‡½æ•° (constructor) ä¸­ä½¿ç”¨æ‰€éœ€å‚æ•°åˆå§‹åŒ–åˆçº¦ï¼š

```solidity
constructor(
Â  Â  address payable _gateway,
Â  Â  address owner,
Â  Â  address _router
) Messaging(_gateway, owner, _router) {}
```

`Messaging` åŸºç¡€åˆçº¦æä¾›äº†å¯¹ç½‘å…³ (Gateway) å’Œè·¯ç”±å™¨ (Router) çš„å†…ç½®è®¿é—®ï¼Œå¹¶ç¡®ä¿æ‚¨çš„åˆçº¦æ­£ç¡®è¿æ¥åˆ° ZetaChain çš„è·¨é“¾æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿã€‚

æ‚¨å¿…é¡»å®ç°ä¸‰ä¸ªæ ¸å¿ƒå†…éƒ¨å‡½æ•°æ¥å¤„ç†æ¶ˆæ¯ä¼ é€’å’Œå›é€€ (fallback)ï¼š

#### onMessageReceive

å½“è·¨é“¾æ¶ˆæ¯æˆåŠŸåˆ°è¾¾ç›®æ ‡é“¾æ—¶ï¼Œæ­¤å‡½æ•°ä¼šè‡ªåŠ¨åœ¨ç›®æ ‡é“¾ä¸Šè¢«è°ƒç”¨ã€‚

```solidity
function onMessageReceive(
Â  Â  bytes memory data,
Â  Â  bytes memory sender,
Â  Â  uint256 amount,
Â  Â  bytes memory asset
) internal override {
Â  Â  //...
}
```

ä½¿ç”¨æ­¤å‡½æ•°è§£ç æ¶ˆæ¯å¹¶æ‰§è¡Œé€»è¾‘ï¼Œä¾‹å¦‚æ›´æ–°çŠ¶æ€ã€è§¦å‘ä¸‹æ¸¸è°ƒç”¨æˆ–è½¬ç§»æ¥æ”¶åˆ°çš„ä»£å¸ä»·å€¼ã€‚

### onMessageRevert

å½“ç›®æ ‡åˆçº¦çš„ `onMessageReceive` å¤±è´¥ï¼ˆä¾‹å¦‚ï¼Œç”±äºæ— æ•ˆçš„ calldata æˆ–é€»è¾‘é”™è¯¯ï¼‰ï¼Œåˆ™ä¼šè§¦å‘æ­¤å‡½æ•°ã€‚

```solidity
function onMessageRevert(
Â  Â  bytes memory data,
Â  Â  bytes memory sender,
Â  Â  uint256 amount,
Â  Â  bytes memory asset
) internal override {
Â  Â  //...
}
```

### onRevert

å½“æ¶ˆæ¯åœ¨è·¯ç”±è¿‡ç¨‹ä¸­ï¼ˆåˆ°è¾¾ç›®æ ‡é“¾ä¹‹å‰ï¼‰å¤±è´¥æ—¶è°ƒç”¨ã€‚å®ƒåœ¨æºé“¾ä¸Šæ‰§è¡Œã€‚

```solidity
function onRevert(RevertContext calldata context)
Â  Â  external
Â  Â  payable
Â  Â  override
Â  Â  onlyGateway
{
Â  Â  if (context.sender != router) revert Unauthorized();
Â  Â  //...
}
```

æ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥å‘ç”¨æˆ·é€€æ¬¾ã€è§¦å‘è¡¥å¿é€»è¾‘æˆ–å‘å‡ºé€šçŸ¥ã€‚

### å‘é€æ¶ˆæ¯

è¦å‘èµ·ä¸€ä¸ªè·¨é“¾æ¶ˆæ¯ï¼Œæ‚¨çš„åˆçº¦å¿…é¡»è°ƒç”¨ EVM ç½‘å…³ä¸Šçš„ `depositAndCall` å‡½æ•°ã€‚æ­¤å‡½æ•°è´Ÿè´£å°†æ‚¨çš„æ¶ˆæ¯å’Œå¯é€‰çš„ä»£å¸ä»·å€¼ç§»äº¤ç»™ ZetaChain çš„æ¶ˆæ¯ä¼ é€’å±‚ä»¥è¿›è¡Œè·¯ç”±ã€‚

æ ¹æ®æ‚¨æ˜¯å‘é€åŸç”Ÿ Gasï¼ˆå¦‚ ETHï¼‰è¿˜æ˜¯ ERC-20 ä»£å¸ï¼Œæ‚¨å°†ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§ `depositAndCall` å½¢å¼ä¹‹ä¸€ã€‚

å¦‚æœæ‚¨æƒ³å‘é€å¸¦æœ‰ ETH ä½œä¸ºä»·å€¼çš„æ¶ˆæ¯ï¼š

```solidity
gateway.depositAndCall{value: msg.value}(
Â  Â  router,
Â  Â  message,
Â  Â  revertOptions
);
```

å¦‚æœæ‚¨è¦å‘é€æ”¯æŒçš„ ERC-20 ä»£å¸ï¼š

```solidity
gateway.depositAndCall(
Â  Â  router,
Â  Â  amount,
Â  Â  asset,
Â  Â  message,
Â  Â  revertOptions
);
```

`asset` æ˜¯è¢«å‘é€çš„ ERC-20 ä»£å¸åœ°å€ï¼ˆå¿…é¡»æ˜¯ ZetaChain æ”¯æŒçš„ï¼‰ã€‚

### æ¶ˆæ¯æœ‰æ•ˆè´Ÿè½½ (Payload) ä¸­åŒ…å«ä»€ä¹ˆï¼Ÿ

`message` å‚æ•°æ˜¯ä¸€ä¸ªå•ç‹¬çš„ `bytes` å­—æ®µã€‚å®ƒç»è¿‡ ABI ç¼–ç ï¼Œå¹¶ä¸”å¿…é¡»éµå¾ª ZetaChain ä¸Šçš„é€šç”¨è·¯ç”±å™¨ (Universal Router) èƒ½å¤Ÿç†è§£çš„ç»“æ„ã€‚

```solidity
abi.encode(
Â  Â  receiver,Â  Â  Â  Â // bytes: ç›®æ ‡é“¾ä¸Šçš„ç›®æ ‡åˆçº¦åœ°å€
Â  Â  targetToken,Â  Â  // address: è¦è½¬ç§»åˆ°ç›®æ ‡åˆçº¦çš„ä»£å¸çš„ ZRC-20 åœ°å€
Â  Â  data,Â  Â  Â  Â  Â  Â // bytes: æ¶ˆæ¯æœ‰æ•ˆè´Ÿè½½ (ä¾‹å¦‚, ABI ç¼–ç çš„ "hello")
Â  Â  gasLimit,Â  Â  Â  Â // uint256: è½¬å‘ç”¨äºåœ¨ç›®æ ‡é“¾ä¸Šæ‰§è¡Œçš„ gas
Â  Â  revertOptionsÂ  Â // struct: å®šä¹‰å¤±è´¥æ—¶çš„æ“ä½œ
)
```

å¦‚æœæ‚¨è¦å‘ Ethereum Sepolia ä¸Šçš„åˆçº¦å‘é€å­—ç¬¦ä¸² `"hello"`ï¼Œæ‚¨å¯ä»¥è¿™æ ·ç¼–ç ï¼š

```solidity
bytes memory data = abi.encode("hello");
bytes memory message = abi.encode(
Â  Â  abi.encodePacked(receiver),Â  // ç›®æ ‡åˆçº¦åœ°å€ (bytes æ ¼å¼)
Â  Â  targetToken,Â  Â  Â  Â  Â  Â  Â  Â  Â // åœ¨ç›®æ ‡é“¾ä¸Šè½¬ç§»çš„ä»£å¸
Â  Â  data,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ABI ç¼–ç çš„æ¶ˆæ¯
Â  Â  300_000,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // Gas é™åˆ¶
Â  Â  revertOptionsÂ  Â  Â  Â  Â  Â  Â  Â  // æŒ‡å®šå›é€€è¡Œä¸ºçš„ç»“æ„ä½“
);
```

ç„¶åï¼Œæ­¤æ¶ˆæ¯è¢«ä¼ é€’ç»™ `depositAndCall()` å¹¶é€šè¿‡ ZetaChain è·¯ç”±åˆ°ç›®æ ‡é“¾ï¼Œåœ¨é‚£é‡Œå®ƒè¢«è§£ç å¹¶ä¼ é€’åˆ°ç›®æ ‡åˆçº¦çš„ `onMessageReceive()` ä¸­ã€‚

### ä»€ä¹ˆæ˜¯é€šç”¨è·¯ç”±å™¨ (Universal Router)ï¼Ÿ

å½“æ‚¨é€šè¿‡ `gateway.depositAndCall(...)` å‘é€è·¨é“¾æ¶ˆæ¯æ—¶ï¼Œå¤„ç†è·¯ç”±å’Œåœ¨ ZetaChain ä¸Šæ‰§è¡Œçš„å®é™…é€»è¾‘æ˜¯åœ¨ä¸€ä¸ªåä¸º **é€šç”¨è·¯ç”±å™¨ (Universal Router)** çš„åˆçº¦ä¸­å®ç°çš„ã€‚

è¯¥åˆçº¦è¿è¡Œåœ¨ ZetaChain ä¸Šï¼Œå¹¶å……å½“ **æ‰€æœ‰è·¨é“¾æ¶ˆæ¯ä¼ é€’é€»è¾‘çš„å…¥å£ç‚¹**ã€‚å®ƒè´Ÿè´£ï¼š

- **è§£æ** ä»æºé“¾å‘é€çš„ **æ¶ˆæ¯æœ‰æ•ˆè´Ÿè½½**
- **äº¤æ¢ä»£å¸** ï¼ˆå¦‚æœéœ€è¦ï¼‰ä¸ºï¼š

  - ç›®æ ‡é“¾çš„ **gas ä»£å¸**ï¼Œä»¥æ”¯ä»˜æ‰§è¡Œè´¹ç”¨
  - è¦äº¤ä»˜ç»™ç›®æ ‡åˆçº¦çš„ **ç›®æ ‡ä»£å¸**

- **è½¬å‘æ¶ˆæ¯** å’Œä»£å¸åˆ°ç›®æ ‡åˆçº¦
- **å¤„ç†å›é€€é€»è¾‘**ï¼Œä»¥é˜²ç›®æ ‡è°ƒç”¨å¤±è´¥

æ‰€æœ‰ä½¿ç”¨ `Messaging` åŸºç¡€åˆçº¦çš„åˆçº¦éƒ½å…±äº«åŒä¸€ä¸ªé€šç”¨è·¯ç”±å™¨ã€‚è¿™ç§å…±äº«è·¯ç”±å™¨ç®€åŒ–äº†å¼€å‘ï¼Œç¡®ä¿äº†æ‰€æœ‰åŸºäºæ¶ˆæ¯ä¼ é€’çš„åº”ç”¨å…·æœ‰ä¸€è‡´çš„è¡Œä¸ºã€‚

é€šç”¨è·¯ç”±å™¨ç¡®ä¿æ‚¨çš„åˆçº¦åªéœ€è¦ä¸“æ³¨äºå‘é€ç¼–ç åçš„æœ‰æ•ˆè´Ÿè½½ï¼Œå…¶ä»–ä¸€åˆ‡â€”â€”ä» gas å¤„ç†åˆ°ä»£å¸è½¬ç§»å†åˆ°äº¤ä»˜æœºåˆ¶â€”â€”éƒ½ä¸ºæ‚¨ç®¡ç†å¥½äº†ã€‚

æ‚¨æ— éœ€ç›´æ¥ä¸é€šç”¨è·¯ç”±å™¨äº¤äº’ã€‚åªéœ€ç¼–ç æ‚¨çš„æ¶ˆæ¯ï¼Œè°ƒç”¨ç½‘å…³ (Gateway)ï¼ŒZetaChain å°†å¤„ç†å‰©ä¸‹çš„äº‹æƒ…ã€‚

> ğŸ”§ é«˜çº§ï¼šå¦‚æœæ‚¨éœ€è¦æ›´å¤šæ§åˆ¶æƒï¼Œä¾‹å¦‚ï¼Œè‡ªå®šä¹‰ä»£å¸äº¤æ¢æ–¹å¼ã€è·¯ç”±åˆ°ä¸åŒåˆçº¦æˆ–ä»¥ä¸åŒæ–¹å¼å¤„ç†æ¶ˆæ¯ï¼Œæ‚¨å¯ä»¥éƒ¨ç½²è‡ªå·±çš„è·¯ç”±å™¨å®ä¾‹ï¼Œå¹¶é€šè¿‡å°†å…¶åœ°å€ä¼ é€’ç»™ `Messaging` æ„é€ å‡½æ•°æ¥å°†æ‚¨çš„åˆçº¦æŒ‡å‘å®ƒã€‚

## éƒ¨ç½²æ¶ˆæ¯åˆçº¦

éƒ¨ç½²åˆ° Base Sepoliaï¼š

```bash
MESSAGING_BASE=$(./commands/index.ts deploy --rpc https://sepolia.base.org --private-key $PRIVATE_KEY | jq -r .contractAddress)
```

éƒ¨ç½²åˆ° Ethereum Sepoliaï¼š

```bash
MESSAGING_ETHEREUM=$(./commands/index.ts deploy --rpc https://sepolia.drpc.org --private-key $PRIVATE_KEY | jq -r .contractAddress)
```

## è¿æ¥ä¸¤ä¸ªåˆçº¦

åœ¨ä¸¤ä¸ªåˆçº¦å¯ä»¥è·¨é“¾é€šä¿¡ä¹‹å‰ï¼Œå®ƒä»¬éœ€è¦æ˜¾å¼åœ°ç›¸äº’ä¿¡ä»»ã€‚è¿™å¯ä»¥é˜²æ­¢æ¶æ„åˆçº¦æ¬ºéª— (spoofing) è·¨é“¾æ¶ˆæ¯ã€‚åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œæ‚¨å°†åœ¨è¿™ä¸¤ä¸ªå·²éƒ¨ç½²çš„æ¶ˆæ¯åˆçº¦ä¹‹é—´å»ºç«‹åŒå‘é“¾æ¥ã€‚

æ¯ä¸ªåˆçº¦éƒ½éœ€è¦çŸ¥é“ï¼š

- è¿œç¨‹é“¾ä¸Šå¯¹åº”åˆçº¦çš„åœ°å€
- è¯¥è¿œç¨‹é“¾çš„é“¾ ID

è¿™æ˜¯é€šè¿‡æ¶ˆæ¯åˆçº¦ä¸­çš„ `setConnected()` å‡½æ•°å®Œæˆçš„ã€‚åªæœ‰å½“åˆçº¦å·²å°†å‘é€æ–¹æ³¨å†Œä¸ºå¯ä¿¡æ—¶ï¼ŒZetaChain çš„è·¨é“¾åŸºç¡€è®¾æ–½æ‰ä¼šå‘è¯¥åˆçº¦ä¼ é€’æ¶ˆæ¯ã€‚

âš ï¸ å¦‚æœæ‚¨è·³è¿‡æ­¤æ­¥éª¤æˆ–è®¾ç½®äº†é”™è¯¯çš„åœ°å€/é“¾ IDï¼Œæ¶ˆæ¯å°†åœ¨ç›®æ ‡é“¾ä¸Šè¢«æ‹’ç»ã€‚

```bash
./commands/index.ts connect \
Â  --contract $MESSAGING_BASE \
Â  --target-contract $MESSAGING_ETHEREUM \
Â  --rpc [https://sepolia.base.org](https://sepolia.base.org) \
Â  --target-chain-id 11155111 \
Â  --private-key $PRIVATE_KEY
```

```bash
./commands/index.ts connect \
Â  --contract $MESSAGING_ETHEREUM \
Â  --target-contract $MESSAGING_BASE \
Â  --rpc [https://sepolia.drpc.org](https://sepolia.drpc.org) \
Â  --target-chain-id 84532 \
Â  --private-key $PRIVATE_KEY
```

ä¸€æ—¦ä¸¤ä¸ªæ–¹å‘éƒ½é“¾æ¥èµ·æ¥ï¼Œåˆçº¦å°±å¯ä»¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯äº†ã€‚

## å‘é€è·¨é“¾æ¶ˆæ¯

ç°åœ¨æ‚¨çš„åˆçº¦å·²ç»éƒ¨ç½²å¹¶è¿æ¥ï¼Œæ‚¨å¯ä»¥ä»ä¸€ä¸ªåˆçº¦å‘å¦ä¸€ä¸ªå‘é€æ¶ˆæ¯äº†ã€‚

æœ¬ç¤ºä¾‹å°†å­—ç¬¦ä¸² "hello" ä» Base Sepolia ä¸Šçš„åˆçº¦å‘é€åˆ° Ethereum Sepolia ä¸Šçš„åˆçº¦ï¼Œ

```bash
./commands/index.ts message \
Â  --rpc [https://sepolia.base.org](https://sepolia.base.org) \
Â  --private-key $PRIVATE_KEY \
Â  --contract $MESSAGING_BASE \
Â  --target-contract $MESSAGING_ETHEREUM \
Â  --types string \
Â  --values hello \
Â  --target-token 0x05BA149A7bd6dC1F937fA9046A9e05C05f3b18b0 \
Â  --amount 0.005
```

| æ ‡å¿— | æè¿° |
| --- | --- |
| `--rpc https://sepolia.base.org` | **æºé“¾** (Base Sepolia) çš„ RPC ç«¯ç‚¹ã€‚äº¤æ˜“å°†å‘é€åˆ°è¿™é‡Œã€‚ |
| `--private-key $PRIVATE_KEY` | åœ¨æºé“¾ä¸Šç­¾ç½²äº¤æ˜“å¹¶æä¾›èµ„é‡‘çš„è´¦æˆ·ã€‚å®ƒå¿…é¡»æŒæœ‰æ­£åœ¨å‘é€çš„ä»£å¸ã€‚ |
| `--contract $MESSAGING_BASE` | éƒ¨ç½²åœ¨æºé“¾ä¸Šçš„æ¶ˆæ¯åˆçº¦åœ°å€ã€‚è¯¥åˆçº¦å‘èµ·è·¨é“¾è°ƒç”¨ã€‚ |
| `--target-contract $MESSAGING_ETHEREUM` | **ç›®æ ‡é“¾** ä¸Šçš„åˆçº¦åœ°å€ã€‚è¿™æ˜¯æ¶ˆæ¯çš„æœ€ç»ˆæ¥æ”¶è€…ã€‚ |
| `--types string` | æ‚¨è¦å‘é€çš„æ¶ˆæ¯çš„ ABI ç±»å‹ã€‚è¿™å¯ä»¥æ˜¯å•ä¸€ç±»å‹ï¼ˆå¦‚ `string`ï¼‰æˆ–å…ƒç»„ï¼ˆä¾‹å¦‚ `string,uint256`ï¼‰ã€‚ |
| `--values hello` | è¦ç¼–ç å¹¶è·¨é“¾å‘é€çš„å®é™…å€¼ï¼Œåœ¨æœ¬ä¾‹ä¸­å°±æ˜¯å­—ç¬¦ä¸² `"hello"`ã€‚ |
| `--target-token 0x...` | ZetaChain ä¸Šä»£è¡¨ç›®æ ‡é“¾ä»£å¸çš„ ZRC20 ä»£å¸åœ°å€ã€‚è¿™å‘Šè¯‰ ZetaChain è¦å°†ä»€ä¹ˆèµ„äº§è½¬ç§»åˆ°ç›®æ ‡åˆçº¦ã€‚ |
| `--amount 0.005` | å‘é€çš„ä»£å¸æ€»é¢ã€‚å…¶ä¸­ä¸€éƒ¨åˆ†ç”¨äºæ”¯ä»˜ç›®æ ‡é“¾ä¸Šçš„ gas è´¹ç”¨ï¼›å…¶ä½™éƒ¨åˆ†å°†è½¬ç§»åˆ°ç›®æ ‡åˆçº¦ã€‚ |

### å¦‚ä½•å¤„ç†é‡‘é¢ (Amount)

å½“æ‚¨ä½¿ç”¨ `--amount` å‘é€è·¨é“¾æ¶ˆæ¯æ—¶ï¼Œæ‚¨ä¸ä»…æ˜¯åœ¨è½¬ç§»ä»£å¸ï¼Œè¿˜æ˜¯åœ¨ä¸ºç›®æ ‡é“¾é¢„ä»˜ gas è´¹ç”¨ã€‚å¹•åå‘ç”Ÿçš„äº‹æƒ…å¦‚ä¸‹ï¼š

1. æ‚¨åœ¨æºé“¾ä¸Š **æä¾›ä»£å¸**ï¼ˆä¾‹å¦‚ Base ETHï¼‰ã€‚è¿™å¯ä»¥æ˜¯åŸç”Ÿ gasï¼ˆå¦‚ ETHï¼‰æˆ–ä»»ä½•æ”¯æŒçš„ ERC-20ã€‚
2. æ‚¨é€šè¿‡ `--target-token` æŒ‡å®šä¸€ä¸ª **ç›®æ ‡ä»£å¸**ï¼Œå®ƒæŒ‡å‘ä»£è¡¨æ‚¨æƒ³åœ¨ç›®æ ‡é“¾ä¸Šäº¤ä»˜çš„ä»£å¸çš„ ZRC-20ï¼ˆä¾‹å¦‚ Ethereum ETHï¼‰ã€‚
3. åœ¨ ZetaChain ä¸Šï¼š

    - **æ‰€æä¾›é‡‘é¢çš„ä¸€éƒ¨åˆ†** ä¼šè¢«è‡ªåŠ¨äº¤æ¢ä¸ºç›®æ ‡é“¾ **gas ä»£å¸** çš„ ZRC-20 ç‰ˆæœ¬ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º Ethereum ETHï¼‰ã€‚è¿™ç”¨äºæ”¯ä»˜æ¶ˆæ¯åœ¨ç›®æ ‡é“¾ä¸Šçš„ **æ‰§è¡Œæˆæœ¬**ã€‚
    - **å‰©ä½™é‡‘é¢** è¢«äº¤æ¢ä¸º **ç›®æ ‡ä»£å¸**ï¼ˆå¯èƒ½ä¸ gas ä»£å¸ç›¸åŒï¼‰å¹¶è½¬å‘åˆ°ç›®æ ‡åˆçº¦ã€‚

è¿™ä½¿å¾—ç³»ç»Ÿå®Œå…¨è‡ªåŠ¨åŒ–ï¼šæ‚¨æ— éœ€æŒæœ‰æˆ–è·å–ç›®æ ‡é“¾çš„åŸç”Ÿä»£å¸å³å¯ä¸å…¶äº¤äº’ã€‚

```json
{
Â  "contractAddress": "0xee2E8dfefd723e879CAa30A1DaD94046Fa3D24D4",
Â  "targetContract": "0x7c9BbA0630c9452F726bc15D0a73cdF769438efE",
Â  "targetToken": "0x05BA149A7bd6dC1F937fA9046A9e05C05f3b18b0",
Â  "message": "0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000568656c6c6f000000000000000000000000000000000000000000000000000000",
Â  "transactionHash": "0x939e230dd504efdf1fce31202a5980b4d0376430ddf535d080666256353c02c3",
Â  "amount": "0.005"
}
```

## è·Ÿè¸ªè·¨é“¾äº¤æ˜“

ä½¿ç”¨ä¸Šä¸€æ­¥ä¸­çš„äº¤æ˜“å“ˆå¸Œæ¥æŸ¥è¯¢å…¶è·¨é“¾çŠ¶æ€ï¼š

```bash
npx zetachain query cctx --hash 0x939e230dd504efdf1fce31202a5980b4d0376430ddf535d080666256353c02c3
```

```text
84532 â†’ 7001 âœ… OutboundMined
CCTX:Â  Â  Â 0xd88d92d0b9b0a2fde416bf6383e430b51de48114b0b03e7cc34e7f8d8df15cb7
Tx Hash:Â  0x939e230dd504efdf1fce31202a5980b4d0376430ddf535d080666256353c02c3 (on chain 84532)
Tx Hash:Â  0x8c368f6a3cfc55950b5d2b0d98c63d1904a79300490ec7d1c258505f372054e3 (on chain 7001)
Sender:Â  Â 0xee2E8dfefd723e879CAa30A1DaD94046Fa3D24D4
Receiver: 0x5BD35697D4a62DE429247cbBDCc5c47F70477775
Message:Â  00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000005ba149a7bd6dc1f937fa9046a9e05c05f3b18b000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000f4240000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000147c9bba0630c9452f726bc15d0a73cdf769438efe00000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000568656c6c6f000000000000000000000000000000000000000000000000000000000000000000000000000000ee2e8dfefd723e879caa30a1dad94046fa3d24d40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000f42400000000000000000000000000000000000000000000000000000000000000000
Amount:Â  Â 5000000000000000 Gas tokens

7001 â†’ 11155111 âœ… OutboundMined
CCTX:Â  Â  Â 0x8952c9f95dfb5673a9fbfa2196842b750f5530f4931a55088b1276599328fd64
Tx Hash:Â  0xd88d92d0b9b0a2fde416bf6383e430b51de48114b0b03e7cc34e7f8d8df15cb7 (on chain 7001)
Tx Hash:Â  0xf30e4414087e8b5c81e257e8a97ac9105dde37cbbd6bb33a1691c4a30585507e (on chain 11155111)
Sender:Â  Â 0x5BD35697D4a62DE429247cbBDCc5c47F70477775
Receiver: 0x7c9BbA0630c9452F726bc15D0a73cdF769438efE
Message:Â  00000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000009ad718280b1cf00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000014a34000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000568656c6c6f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000014ee2e8dfefd723e879caa30a1dad94046fa3d24d40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
Amount:Â  Â 1074034700777807 Gas tokens
```

è¿™ç¡®è®¤äº†æ¶ˆæ¯å·²æˆåŠŸä» Base Sepolia é€šè¿‡ ZetaChain è½¬ç§»åˆ° Ethereum Sepoliaã€‚

æ‚¨å¯ä»¥åœ¨ Etherscan ä¸ŠéªŒè¯ç›®æ ‡é“¾äº¤æ˜“ï¼š

https://sepolia.etherscan.io/tx/0xf30e4414087e8b5c81e257e8a97ac9105dde37cbbd6bb33a1691c4a30585507e

